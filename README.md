Нелинейный фильтр ограничения скорости, ускорения и рывка
=========================================================

Фильтр может быть использован при решении различных задачь управления
приводами, кранами, станками с ЧПУ, 3d принтерами,
в железнодорожном и другом транспорте, в радиолокации, в авиации,
при управлении БЛА, в ракето и торпедостроении, при проектировани лифтов,
при построении различными прицензионных систем плавного пуска и торможения.  

При "медленноменяющихся" входных значениях выходная последовательность
повторяет входную (должна!).

Выходные значения "стараются максимально быстро повторять" входные,
но на первую, вторую и третью производную выходного значения накладываются
ограничения.

Для инициализиции и сброса фильтра служит функция rfilt_init().
Для обновления параметров фильтра "на лету" служит функция rfilt_tune().
Основаня рабочая функция фильтра - rfilt_step().

ИДЕЯ ФИЛЬТРА
------------
Считается, что выходное значение на каждом интервале меняется по закону:
"""
dt = t[i+1] - t[i]
x[i+1] = x[i] + v[i] * dt + a[i] * dt^2 / 2 + r[i] * dt^3 / 6  (1)
где:
  dt     - шаг разбиения по времени;
  x[i]   - выходное значение на текущем шаге
  x[i+1] - выходное значение на следующем шаге
  v[i]   - текущая (начальная на интервале) скорость
  a[i]   - текущее (начальника на интервале) ускорение
  r[i]   - выбранный для данного интервала рывок
"""

Скорость и ускорение расчитывается следующим образом:
"""
  v[i+1] = v[i] + a[i] * dt + r[i] * dt^2 / 2                  (2)
  a[i+1] = a[i] + r[i] * dt                                    (3)
"""

Для того, чтобы при вычислениях не использовать dt, dt^2 и dt^3 используются
приведенные величины скорости, ускорения и рывка (фактически это конечные
разности первого, второго и третьего порядка):
"""
  V = dx  = v * dt
  A = d2x = a * dt^2
  R = d3x = r * dt^3
"""
При такой подмене формулы (1), (2) и (3) принимаеют упращенный вид:
"""
  x[i+1] = x[i] + V[i] + A[i] / 2 + r[i] / 6   (1')
  V[i+1] = V[i] + A[i] + R[i] / 2              (2')
  A[i+1] = A[i] + R[i]                         (3')

"""

Не простой задачей является вычислене оптимального значения величины R[i] для
каждого интервала разбиения.
Оптимизация проводится по минимальному времени достижения заданного значения
на выходе фильтра при движении с заданными ограничениями величин скорости,
ускорения и рывка.

Пользовтаель задает следующие ограничения для работы фильтра:
"""
  v_max        - максимальная скорость изменения выходного значения
  a_up_max     - максимальное ускорение разгона
  a_down_max   - максимальное ускорение торможения
  x_min, x_mаx - минимальное и максимальное выходное значение
"""

Для текущего зачния скрости и ускорения вычислятся "минимальный тормозной
путь" - величина перемещения при отимальном торможении до нулевой скорости
и нулевого ускорения с ограничением скорости, ускорения и рывка.

Если "пора/нужно томозиить", то выбирается рывок для данной фазы отимального
торможения.


